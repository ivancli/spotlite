{"version":3,"sources":["spotlite.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"spotlite.js","sourcesContent":["Highcharts.setOptions({\n    global: {\n        useUTC: false\n    }\n});\n\nvar today = timestampToDateTimeByFormat(new Date().getTime() / 1000, 'Y-m-d');\n\n$(function () {\n    $.ajaxSetup({\n        headers: {\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n        }\n    });\n\n    // if (localStorage.getItem(\"sidebar-is-collapsed-\" + user.user_id) == 1) {\n    //     $(\"body\").addClass(\"sidebar-collapse\");\n    // }\n\n    if (getLocalStorageOrCookie(\"sidebar-is-collapsed-\" + user.user_id) == 1) {\n        $(\"body\").addClass(\"sidebar-collapse\");\n    }\n\n    if (typeof user != 'undefined' && (user.needSubscription == false || user.subscription != null)) {\n        /* clean up unused cookie/localStorage */\n        if (localStorageAvailable()) {\n            $.each(localStorage, function (key, value) {\n                /*show login welcome message once per day*/\n                /*removing previous welcome message local storage*/\n                if (key != \"met-first-login-welcome-msg-\" + today + \"-\" + user.user_id && key.startsWith(\"met-first-login-welcome-msg-\")) {\n                    localStorage.removeItem(key);\n                }\n                /*show credit card expiry notification once per day*/\n                /*removing previous credit card expiry message local storage*/\n                if (key != \"met-cc-expiry-msg-\" + today + \"-\" + user.user_id && key.startsWith(\"met-cc-expiry-msg-\")) {\n                    localStorage.removeItem(key);\n                }\n            });\n        } else {\n            $.each(getCookies(), function (key, value) {\n                /*show login welcome message once per day*/\n                /*removing previous welcome message local storage*/\n                if (key != \"met-first-login-welcome-msg-\" + today + \"-\" + user.user_id && key.startsWith(\"met-first-login-welcome-msg-\")) {\n                    removeCookie(key);\n                }\n                /*show credit card expiry notification once per day*/\n                /*removing previous credit card expiry message local storage*/\n                if (key != \"met-cc-expiry-msg-\" + today + \"-\" + user.user_id && key.startsWith(\"met-cc-expiry-msg-\")) {\n                    removeCookie(key);\n                }\n            });\n        }\n\n        if (user.set_password == 'n') {\n            showSetPasswordPopup(function () {\n                showLoading();\n                showWelcomePopup(function () {\n                    if ($(\"video\").length > 0) {\n                        $(\"video\").get(0).pause();\n                    }\n                    tourOrCreditCard();\n                });\n            })\n        } else {\n            if (user.industry == null) {\n                showLoading();\n                showWelcomePopup(function () {\n                    if ($(\"video\").length > 0) {\n                        $(\"video\").get(0).pause();\n                    }\n                    tourOrCreditCard();\n                });\n            } else {\n                tourOrCreditCard();\n            }\n        }\n    } else {\n    }\n});\n\nfunction showSetPasswordPopup(callback) {\n    showLoading();\n    $.ajax({\n        \"url\": \"/password/init_reset\",\n        \"success\": function (html) {\n            hideLoading();\n            var $modal = popupFrame(html);\n            $modal.find(\".modal-dialog\");\n            $modal.modal({\n                \"backdrop\": \"static\",\n                \"keyboard\": false\n            });\n\n            $modal.on(\"hidden.bs.modal\", function () {\n                if ($.isFunction(callback)) {\n                    callback();\n                }\n            });\n        },\n        \"error\": function (xhr, status, error) {\n            hideLoading();\n            describeServerRespondedError(xhr.status);\n        }\n    })\n}\n\nfunction showWelcomePopup(callback) {\n    $.get('/msg/subscription/welcome/0', function (html) {\n        setLocalStorageOrCookie(\"met-first-login-welcome-msg-\" + today + \"-\" + user.user_id, 1);\n        hideLoading();\n        var $modal = popupFrame(html);\n        $modal.find(\".modal-dialog\").addClass(\"modal-lg\");\n        $modal.modal({\n            \"backdrop\": \"static\",\n            \"keyboard\": false\n        });\n\n        $modal.on(\"hidden.bs.modal\", function () {\n            if ($.isFunction(callback)) {\n                callback();\n            }\n        });\n    });\n}\n\nfunction showCreateGroupFirstLogin() {\n    showLoading();\n    $.get('group/first_login', function (html) {\n        hideLoading();\n        var $modal = $(html);\n        $modal.modal({\n            \"backdrop\": \"static\",\n            \"keyboard\": false\n        });\n        $modal.on(\"hidden.bs.modal\", function () {\n            $(\"#modal-group-store\").remove();\n        });\n    });\n}\n\nfunction showCreditCardExpiry() {\n    showLoading();\n    $.get('/msg/subscription/cc_expiring/0', function (html) {\n        hideLoading();\n        var $modal = popupFrame(html);\n        $modal.modal();\n    });\n}\n\nfunction saveSidebarStatus() {\n    if ($(\"body\").hasClass(\"sidebar-collapse\")) {\n        removeLocalStorageOrCookie(\"sidebar-is-collapsed-\" + user.user_id);\n    } else {\n        setLocalStorageOrCookie(\"sidebar-is-collapsed-\" + user.user_id, 1);\n    }\n}\n\nfunction tourOrCreditCard() {\n    /*if bootstrap tour is available in this page*/\n    if ($.urlParam('auto_tour') == 'true' && typeof tour != 'undefined') {\n        startTour();\n        setTourVisited();\n    } else if (typeof tour != 'undefined' && $.isFunction(tourNotYetVisit) && tourNotYetVisit()) {\n        startTour();\n        setTourVisited();\n    } else if (typeof cc_expire_within_a_month != 'undefined' && cc_expire_within_a_month == true && getLocalStorageOrCookie(\"met-cc-expiry-msg-\" + today + \"-\" + user.user_id) != 1) {\n        /*or if the credit card will be expire soon, show notification*/\n        setLocalStorageOrCookie(\"met-cc-expiry-msg-\" + today + \"-\" + user.user_id, 1);\n        showCreditCardExpiry();\n    }\n}\n\nfunction showContactUs() {\n    showLoading();\n    $.get('/contact_us/form', function (html) {\n        hideLoading();\n        var $modal = $(html);\n        $modal.modal();\n        $modal.on(\"hidden.bs.modal\", function () {\n            $(\"#modal-contact-us\").remove();\n        });\n    });\n}\n\n\nfunction startSpotLiteTour(el) {\n    if (user.firstAvailableDashboard != null) {\n        window.location.href = user.firstAvailableDashboard.urls.show + \"?auto_tour=true\";\n    } else {\n        removeLocalStorageOrCookie('tour_current_step');\n        removeLocalStorageOrCookie('tour_end');\n        startTour();\n        setTourVisited();\n    }\n}"]}